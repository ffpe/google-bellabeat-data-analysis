---
title: "Google Data Analytics Project Bellabeat Case Study"
output:
  html_document:
    df_print: paged
Author: Fidelio
---

## Setting up Packages and Importing Files

```{r}
install.packages('ggplot2')
install.packages('lubridate')
install.packages ('tidyverse')
install.packages('dplyr')
install.packages('tidyr')
install.packages('ggpmisc')
```

Load these packages

```{r}
library(ggplot2)
library(lubridate)
library(tidyverse)
library(dplyr)
library(tidyr)
library(ggpmisc)
```

Import datasets

```{r}
setwd("/cloud/project/SQL Results")
by_id <- read.csv("avg_by_id.csv")
by_time <-read.csv("Avg_by_time_day.csv")
by_day <-read.csv("Avg_by_day_of_week.csv")
by_date <-read.csv("avg_by_date.csv")
weight_change <- read.csv("change_weight.csv")

```

Use the head() functions to make sure everything is imported correctly

```{r}
head(by_date)
head(by_day)
head(by_id)
head(by_time)
head(weight_change)
```

also Use tibble() functions

```{r}
tibble(by_id)
tibble(by_day)
```

Check if imported date columns are correct

```{r}
str(by_date)
str(by_day)
str(by_id)
str(by_time)
```

Confirming date column to be date format using either

```{r}
by_date$date <- format(by_date$Date, format = "%Y-%m-%d")
as.Date(by_date$Date, "%Y-%m-%d")
```

## Summary of Data

```{r}
# Daily Activity
by_id %>%
  select(avg_steps, 
         avg_distance, 
         Avg_calories,
         avg_minutes_asleep, 
         avg_time_bed, 
         avg_very_active_minutes, 
         avg_very_active_distance,
         avg_fairly_active_minutes,
         avg_moderately_active_distance,
         avg_lightly_active_minutes, 
         avg_light_distance,
         avg_sedentary_minutes,
         avg_sedentary_distance) %>%
  summary()
```

The mean time asleep per day is 377 minutes or 6.3 hours which is below the recommended 8 hours by health experts. The average sedentary minutes is 999 minutes or 16 hours which is too much time.

The average sedentary minutes per day is very high at 999 or 16 hours which should be 10 hours at maximum.

The average steps taken per day is too low at 7,519 steps which should be aimed at around 10,000 steps per day according to medical health experts.

According to dietary guidelines, it is recommended for the average adult woman to burn around 1600 to 2400 calories per day, while for the average adult man to burn around 2000 to 3000 calories per day. The average here shows 2282 calories per day which is quite high for woman, but not too high for a man. There should also be other parameters such as calorie intake to measure calorie deficit and diet goal from BMI. Since there are no gender data and other parameters for calorie in the respondents therefore it is not sufficient to draw conclusions from the data.

```{r}
#Weight Change Summary
weight_change %>%
  select(Datediff,
         initial_BMI,
         Latest_BMI,
         BMI_DIFF, 
         WEIGHT_DIFF) %>%
  summary()
```

Despite small sample size, the respondents that track their weight data shows considerable weight change. According to CDC, the normal range of BMI is between 18.5 to 24.9 and a healthy range of weight loss is 0.4 to 0.8 kg per week. The data here shows an average of 0.3 kg decrease per 2 weeks. Their average BMI lowered by 0.1 from an average of 28. Although not much, Fitbit smart health device has helped respondents in making progress toward their weight loss journey.

## Visualization

```{r}
# Correlation between calories and total steps
ggplot(data=by_id, aes(x=avg_steps, y=Avg_calories)) + geom_point() + geom_smooth(method = "lm") + stat_poly_eq()+ labs(title="Daily calories burned vs Daily steps taken")
```

The correlation between daily calories burned and daily steps taken is quite low since it is less than 0.4. This indicates that there are respondents who burn a lot of calories without taking many steps and there are respondents who burn less calories despite taking many steps. The prior is due to high intensity activity with little displacement such as exercising in the gym or lifting weights. The latter represents people who took more steps, but still burned less calorie. A probable reason for this is most steps taken are casual strolling with low intensity.

```{r}
# Correlation between calories and sedentary minutes
ggplot(data=by_id, aes(x=avg_sedentary_minutes, y=Avg_calories)) + geom_point() + geom_smooth(method = "loess") + stat_poly_eq()+ labs(title="Daily calories burned vs.Daily sedentary minutes")
```

There is a very insignificant negative correlation between sedentary minutes and calories burned. The chart below will explain further why.

```{r}
# Correlation between calories and very active minutes
ggplot(data=by_id, aes(x=avg_very_active_minutes, y=Avg_calories)) + geom_point() + geom_smooth(method = "loess") + stat_poly_eq() + labs(title="Daily calories burned vs daily very active minutes")
```

This chart shows that there is a stronger correlation in a positive direction between calories burned and very active minutes compared to calories and sedentary minutes. A plausible reason behind this is if someone does a high intensity activity, it does not matter if they take a longer rest. What matters more for calorie burning is the active minutes. Long sedentary minutes, however, could negatively impact health and wellness.

```{r}
# Correlation between time in bed and minutes asleep
ggplot(data=by_id, aes(x=avg_time_bed, y=avg_minutes_asleep)) + geom_point() + geom_smooth(method = "lm") + stat_poly_eq() + labs(title="Correlation between time asleep and time in bed")
```

There is a very stong positive correlation between time spent in bed and minutes asleep.

```{r}
# Correlation between daily steps taken and daily distance traveled
ggplot(data=by_id, aes(x=avg_distance, y=avg_steps)) + geom_point() + geom_smooth(method = "lm") + stat_poly_eq() + labs(title="Correlation between daily steps and daily distance")
```

It is clear that there is a strong positive correlation between daily steps and daily distance. The more steps taken the further the distance traveled.

```{r}
# Minutes Asleep vs . Sedentary Minutes
ggplot(data=by_id, aes(x=avg_sedentary_minutes, y=avg_minutes_asleep)) + geom_point() + stat_poly_eq() + geom_smooth(method = "lm") + labs(title="Minutes Asleep vs Sedentary Minutes")
```

There is a insignificant low negative correlation between sedentary minutes and minutes asleep. We would expect that lower sedentary time means that higher minutes asleep since the users will have lower energy after being more active. Turns out there are other effects that makes falling asleep much more difficult such as smartphone usage or screen time or caffeine intake. This makes users more alert and decrease minutes asleep despite not being active.

```{r}
# Average Total Steps vs. Time  
ggplot(data = by_time, aes(x = Time_of_Day, y = avg_hourly_step)) + geom_col() + scale_x_continuous(breaks = seq(0,23,1))+ labs(title = "Average Total Steps vs. Time")
```

The bar chart shows that highest amount of steps taken is at 6-7 PM or 18:00 to 19:00. This makes sense due to respondents going back from work or just enjoying the evening walk since afternoon is too hot during the summer at the time data this was collected. The number of steps fall drastically at 8 PM or 20:00 as the users are preparing to go to bed.

Between 00:00 to 05:00 the respondents are asleep so there is little to no steps unless needed to. At 6 AM, there is a significant increase which indicates respondents wake up around this time and it continues to increase until 8-11 AM which it remains relatively stable. At 12 PM, there is an increase which may be explained by users trying to find lunch.

```{r}
# Average Calories Burned vs. Time 
ggplot(data = by_time, aes(x = Time_of_Day, y = avg_hourly_calories)) + geom_col() + scale_x_continuous(breaks = seq(0,23,1))+ labs(title = "Average Total Calories vs. Time")
```

The time at which calories burned correlates to steps taken. At 18:00 where steps taken are the highest, calories burned are also highest. Calories burned least during sleeping time 23:00-04:00 as the body's metabolism slows down. While the calories burned increase, as the user wakes up and begins activity from 07:00-16:00.

```{r}
# Average Heartrate vs. Time 
ggplot(data = by_time, aes(x = Time_of_Day, y = avg_hourly_heartrate)) + coord_cartesian(ylim = c(60,85)) + geom_col() + scale_x_continuous(breaks = seq(0,23,1)) + labs(title = "Average Heart Rate vs. Time")
```

The normal heart rate is 60-100 bpm. Heart rate increases during high activity or stress response. Thus, it is lower during sleep and high during more intense activity. The anomaly from this chart is at 10 AM. At this time, the steps taken are lowm, but the heart rate is as high as 5-7 PM when the steps taken is highest. This is probably due to work related-stress, caffeine effect from the morning or other social factors which there isn't sufficient data collected to draw conclusion.

```{r}
# Steps taken throughout the Week
ggplot(data = by_day, aes(x = Day_name, y = avg_steps)) + geom_col() + scale_x_discrete(limits = c("Mon", "Tue", "Wed","Thu","Fri","Sat","Sun")) + labs(title = "Average Steps by Day")
```

There is little differences between average steps taken throughout the weekdays from Monday-Friday. Saturday has the highest average steps and Sunday has the lowest. Users tend to relax more on Sundays to prepare for the work day. On Saturday, they plan to go out more either excercise or doing leisure activities.

```{r}
# Time in Bed taken throughout the Week
ggplot(data = by_day, aes(x = Day_name, y = avg_time_bed)) + geom_col() + scale_x_discrete(limits = c("Mon", "Tue", "Wed","Thu","Fri","Sat","Sun")) + labs(title = "Average Time in Bed by Day")
```

Users spend almost 500 minutes or 8.3 hours in bed on Sundays (the highest) followed by Wednesday. Despite Saturday being a weekend, time spent in Bed resting is lower than Wednesday. A probable cause of this is that Wednesday is the middle of the weekday where people tend to get exhausted from work.

```{r}
# Average Progress of Steps
ggplot(data = by_date, aes(x = Date, y = avg_steps, group = 1)) + geom_line() + theme(axis.text.x=element_text(angle=90)) + labs(title = "Average Steps throughout the survey")
```

During the duration of the data collection period, there are small fluctuations in average steps taken. Throughout the 1 month, the last day is the lowest. A reason for this might be that users did not track their steps before submitting the data or the data was collected mid-day.

```{r}
# Average Progress of Calories Burned
ggplot(data = by_date, aes(x = Date, y = Avg_calories, group = 1)) + geom_line() + theme(axis.text.x=element_text(angle=90)) + labs(title = "Average Calories Burned throughout the survey")
```

There is little fluctuation in calories burned. Calories burned drops drastically in the final day of data collection. The most likely reason is same as above which is the last day of data collection did not track full day.

```{r}
# Average Progress of Daily Time Asleep
ggplot(data = by_date, aes(x = Date, y = avg_minutes_asleep, group = 1)) + geom_line() + theme(axis.text.x=element_text(angle=90)) + labs(title = "Average Daily Time Asleep throughout the survey")
```

The average time asleep fluctuates more and most of the time below 450 minute except for 04/23 and 04/17. The remaining are lower than the recommended daily sleep time of 8 hours or 480 minutes. There is little to no progress in improving sleep time since the beginning of this data collection period. On the last day, a probable reason to why there is no drastic reduction in minutes asleep due to data submission is done during the day. Thus, only affecting calories and steps

## Recommendations

Based on the the Fitbit health activity data, there are few recommendations to be applied to Bellabeat smart device:

### Distinguish the user's sex

It is important to market differently toward man and woman. All the activity metrics that women do are different for men biologically. This should be implemented in the as a feature and and as an option Bellabeat app. As for the device, the Bellabeat can custom Leaf and Time to have larger diameter to accommodate for men's size.

### Age input is important

Age is an important indicator for accuracy in health activity. Someone from 50-60 years old would have different heart rate, steps, calories burned and highly active minutes compared to someone from 20-30 years old. This is done to be more inclusive toward every generation.

### Encourage more users to use the weight tracking

Despite small sample size, there is a considerable progress. Using a smart health device is helpful for people who wish to achieve their body weight goal. A notification in the app and a progress chart could motivate users to change their habits for a better body. Ensure privacy and protection of data, so that users are comfortable sharing their weight data.

### Notification for too much sedentary minutes

Based on the data collected, users are most likely to be sedentary. High sedentary minutes is not only unhealthy, but also detrimental to mental wellness and linked to increase stress and poor sleep. If daily sedentary exceeds the recommended minutes, notify the user to take a walk outside, breathe fresh air and do some activities.

### Reminders based on time

5-7 PM is the highest activity since it is the time when people go home from work. Based on the trends identified, Saturday has the highest activity. During these periods, Bellabeat can give Reminders to go for a run or walk.

### Calories intake

Calories burned is not enough measurement if the intake offsets it. Track what the user is eating by making presets of food menu and their estimated calories in the app. Calories intake will be subtracted by calories burned to get net calorie. Users who wish to reduce their weight should have a calorie deficit.

### Steps Goal and Intensity

The average total steps is lower than recommended and Bellabeat can motivate users to achieve their goal especially during weekend. However, there is likely that users prefer gym or sports with high intensity but lower displacement. Bellabeat Leaf or Time could calibrate users' heart rate, basal metabolic rate, accelerometer to give accurate judgement so that the users won't be notified to reach more steps if they have exercised.

### Emphasize Sleep Pattern

The data shows that users get less than 8 hours of sleep. Encouraging the users to get more sleep when it is night time is important. Notify the users if the device detects that the users are in bed, but have not fallen asleep.

### Incorporate weather and Climate Data

Hot weather and cold weather may impact health activity. E.g. during snowy days, users should not be expected to take a run outside.

### Reconduct Survey

The data used is poor quality and has many limitations. Making decisions based on this data alone is not recommended. Conducting further survey with larger samples, longer time span, more information collected such as age, sex and occupation, climate region may improve reliability and relevancy of data.

## Thank you

I hope this insight and recommendation will help in making executive decisions for Bellabeat's marketing strategy.
